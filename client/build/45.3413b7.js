(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{142:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);var r=a(24),C=a.n(r),r=a(3),k=a.n(r),r=a(4),S=a.n(r),r=a(1),x=a.n(r),B=a(0),I=a.n(B),T=(a(142),a(9)),R=a(124),r=a(5),O=a.n(r),r=a(18),h=a.n(r),j=a(115);a(144);function n(t,e){var a,r=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)),r}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach(function(e){h()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function D(e){function t(e){e=parseInt(e.target.dataset.value),_(e),p(!0),0!==e&&f("")}var c=e.commentProduct,o=e.idCourse,s=e.setCommentProduct,i=e.updateCourseAverageRate,l=e.setIsloadFirstTimePage,u=e.user,a=Object(B.useState)(!1),m=(E=x()(a,2))[0],r=E[1],n=Object(B.useState)(!1),d=(e=x()(n,2))[0],p=e[1],a=Object(B.useState)(""),n=(E=x()(a,2))[0],f=E[1],e=Object(B.useState)(0),v=(a=x()(e,2))[0],_=a[1],E=Object(B.useState)({title:""}),w=(e=x()(E,2))[0],g=e[1],a=Object(B.useState)({review:""}),N=(E=x()(a,2))[0],b=E[1],e=[1,2,3,4,5].map(function(e){return I.a.createElement("i",{key:e,"data-value":e,className:e<=v?"fas fa-star active":"far fa-star",onClick:t})}),a=function(e){var t=e.target,e=t.name,t=t.value;g(y(y({},w),{},h()({},e,t))),b(y(y({},N),{},h()({},e,t))),r(!0)},E=function(){var t=S()(k.a.mark(function e(t){var a,r,n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=(new Date).toISOString().slice(0,10),a={comment:N.review,date:n,_id:Object(j.a)(),idCourse:o,isComment:m,isRate:d,rate:v,title:w.title,userId:u.userId,username:u.user},e.next=5,Object(T.g)(a);case 5:r=e.sent,n=r.data,200===r.status?(s([].concat(O()(c),[a])),l(!0),i(a)):f(n.alert);case 9:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),n=n?I.a.createElement("p",{className:"product-review__alert"},n):null;return I.a.createElement("div",{className:"product-review"},n,I.a.createElement("div",{className:"product-review__rating"},e),I.a.createElement("form",{className:"product-review__form",onSubmit:E},I.a.createElement("div",{className:"product-review__details"},I.a.createElement("input",{className:"product-review__input",name:"title",placeholder:"Title",onChange:a,value:w.title,required:!0}),I.a.createElement("label",{className:"product-review__label"},"Title")),I.a.createElement("div",{className:"product-review__details"},I.a.createElement("textarea",{className:"product-review__textarea",name:"review",placeholder:"Comment",onChange:a,value:N.review,required:!0}),I.a.createElement("label",{className:"product-review__label"},"Comment")),I.a.createElement("button",{className:"product-review__button"},"Submit")))}function A(e){var t=e.comment,a=e.date,r=e.rate,n=e.title,c=e.username,e=[1,2,3,4,5].map(function(e){return I.a.createElement("i",{key:e,"data-value":e,className:e<=r?"fas fa-star active":"far fa-star"})});return I.a.createElement("div",{className:"product__single-comment single-comment"},I.a.createElement("span",{className:"single-comment__date"},a),I.a.createElement("p",{className:"single-comment__username"},c),I.a.createElement("h4",{className:"single-comment__title"},n),I.a.createElement("div",{className:"single-comment__rating"},e),I.a.createElement("p",{className:"single-comment__comment"},t))}a(145);var M=a(7),Q=a(16);t.default=function(e){function r(e){var t=function(e,t){return e+t.rate};Boolean(e)&&(a=o.concat(e));var t=(Boolean(e)?a:o).reduce(t,0),a=Boolean(e)?t/a.length:t/o.length,r=parseInt(a.toFixed()),t=[1,2,3,4,5].map(function(e){return I.a.createElement("i",{key:e,"data-value":e,className:e<=r?"fas fa-star active":"far fa-star"})});return(a=s.find(function(e){return e._id===N})).averageRate=r,{avrageStarsRated:t,updatedCourse:a}}var t=e.history,a=e.location,n=Object(B.useContext)(M.a),c=n.adjustValidationMsg,o=n.commentProduct,s=n.courses,i=n.setCommentProduct,l=n.setErrorServerMsg,u=n.setIsloadFirstTimePage,m=n.user,d=n.validationMsg,p=Object(B.useContext)(Q.a),f=p.addToCart,v=p.cart,_=Object(B.useState)(null),E=x()(_,2),w=E[0],g=E[1],N=a.pathname.slice(9),b=s.find(function(e){return e._id===N}),O=b.author,h=b.amount,j=b.description,y=b.imagePath,e=b.title,n=b.price,p=Boolean(m)&&o.find(function(e){return e.userId===m.userId}),_=v.find(function(e){return e._id===N}),E=Boolean(_)?h-_.totalQtyProduct:h,a=Boolean(_)&&h-_.totalQtyProduct<0,b=Boolean(_)?0<h-_.totalQtyProduct?"Add to cart":"No more items in stock":0<h?"Add to cart":"Out of Stock",v=Boolean(_)?!(0<h-_.totalQtyProduct):!(0<h),_=Boolean(_)?0<h-_.totalQtyProduct?"product__addToCart":"product__out-of-stock":0<h?"product__addToCart":"product__out-of-stock",P=function(){var e=S()(k.a.mark(function e(){var t,a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.l)(N);case 2:t=e.sent,a=t.data,(200===t.status?i:l)(a);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),h=function(){var t=S()(k.a.mark(function e(t){var a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r(t),a=a.updatedCourse,e.next=3,Object(T.B)(a);case 3:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}();Object(B.useEffect)(function(){P()},[]),Object(B.useEffect)(function(){var e=r().avrageStarsRated;g(e)},[o]),Object(B.useEffect)(function(){window.scrollTo({top:0})},[]);u=Boolean(m)?I.a.createElement(D,{adjustValidationMsg:c,commentProduct:o,idCourse:N,setCommentProduct:i,setIsloadFirstTimePage:u,updateCourseAverageRate:h,user:m,validationMsg:d}):I.a.createElement("p",{className:"product__info-reviews-alert"},"Please sign in to write review ",I.a.createElement("i",{className:"fas fa-lock"})),h=o.map(function(e){return I.a.createElement(A,C()({key:e._id},e))}),d=I.a.createElement("p",{className:"product__info-reviews-alert"},"You already reviewed this product");return I.a.createElement("article",{className:"article-product"},I.a.createElement("div",{className:"article-product product"},I.a.createElement(R.a,{history:t}),I.a.createElement("div",{className:"product__wrapper"},I.a.createElement("div",{className:"product__image"},I.a.createElement("img",{src:y,alt:"",className:"product__img"})),I.a.createElement("div",{className:"product__details"},I.a.createElement("h2",{className:"product__title"},e),I.a.createElement("p",{className:"product__authors"},O),I.a.createElement("p",{className:"product__text"},j),I.a.createElement("div",{className:"product__avarage-rating"},w,I.a.createElement("span",{className:"product__rating-text"},1===o.length?"".concat(o.length," review"):"".concat(o.length," reviews"))),I.a.createElement("div",{className:"product__details-1"},I.a.createElement("p",{className:"product__price"},"Price: ",n,"â‚¬"),I.a.createElement("div",{className:"product__details-3"},I.a.createElement("button",{className:_,onClick:function(){f(N)},disabled:v},a?"Out of stock":b),I.a.createElement("p",{className:"product__inStock"},"In stock: ",E))))),I.a.createElement("div",{className:"product__reviews"},I.a.createElement("h2",{className:"product__reviews-title"},"Reviews"),h,I.a.createElement("div",{className:"product__info-reviews"},I.a.createElement("h2",{className:"product__info-reviews-title"},"Add your own review"),Boolean(p)&&p.isRate&&p.isComment?d:u))))}}}]);