(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{126:function(e,t,a){"use strict";var n=a(0),w=a.n(n),n=a(127),N=a(122),y=a(25);t.a=function(e){var t=e.amount,a=e.author,n=e.checkIsImageLoaded,r=e.description,i=e.editFormRef,l=e.fileImg,c=e.handleAddImage,s=e.handleChange,o=e.handleCloseModalByButtonX,d=e.handleSubmit,m=e.handleValidateMsg,u=e.imagePath,p=e.inputFileRef,g=e.partClass,h=e.price,b=e.showHideImgDiv,f=e.setIsAddAdvert,_=e.setCheckIsImageLoaded,v=e.setFileImg,O=e.setImageUrl,E=e.setpartClass,j=e.title,e=e.validationMsg,E=Boolean(l)&&w.a.createElement(N.a,{handleValidateMsg:m,setCheckIsImageLoaded:_,uploadFile:l,setFileImg:v,setIsAddAdvert:f,setImageUrl:O,setpartClass:E}),e=e?w.a.createElement(y.a,{partClass:g,msg:e}):null;return w.a.createElement("form",{className:"modal-edit",onSubmit:d,ref:i},E,w.a.createElement("button",{className:"modal-edit__close-btn",type:"button",onClick:o},w.a.createElement("i",{className:"fas fa-times"})),e,w.a.createElement("h2",{className:"modal-edit__title"},"Edit course"),w.a.createElement("div",{className:"modal-edit__wrap-input"},w.a.createElement("input",{type:"text",className:"modal-edit__input",maxLength:"40",name:"title",onChange:s,value:j,placeholder:"Course title",required:!0}),w.a.createElement("label",{className:"modal-edit__label"},"Course title:"),w.a.createElement("span",{className:"modal-edit__border"})),w.a.createElement("div",{className:b?"modal-edit__wrap-input--inactive":"modal-edit__wrap-input"},w.a.createElement("input",{type:"text",className:"modal-edit__input",name:"imagePath",onChange:s,value:u,placeholder:"Image url address",required:!0!==b}),w.a.createElement("label",{className:"modal-edit__label"},"Image url address:"),w.a.createElement("span",{className:"modal-edit__border"})),w.a.createElement("div",{className:u?"modal-edit__wrap-input-file--inactive":"modal-edit__wrap-input-file"},w.a.createElement("input",{className:"modal-edit__add-input-file",name:"file",onChange:c,type:"file",required:!0!==Boolean(u),ref:p}),w.a.createElement("span",{className:"modal-edit__border"})),w.a.createElement("div",{className:"modal-edit__wrap-input"},w.a.createElement("textarea",{type:"text",className:"modal-edit__input modal-edit__input--textarea",name:"description",onChange:s,value:r,placeholder:"Description",required:!0}),w.a.createElement("label",{className:"modal-edit__label"},"Description:"),w.a.createElement("span",{className:"modal-edit__border"})),w.a.createElement("div",{className:"modal-edit__wrap-input"},w.a.createElement("input",{type:"number",className:"modal-edit__input",min:"0",name:"price",onChange:s,value:h,placeholder:"Price",required:!0}),w.a.createElement("label",{className:"modal-edit__label"},"Price:"),w.a.createElement("span",{className:"modal-edit__border"})),w.a.createElement("div",{className:"modal-edit__wrap-input"},w.a.createElement("input",{type:"text",className:"modal-edit__input",name:"author",onChange:s,value:a,placeholder:"Author",required:!0}),w.a.createElement("label",{className:"modal-edit__label"},"Author:"),w.a.createElement("span",{className:"modal-edit__border"})),w.a.createElement("div",{className:"modal-edit__wrap-input"},w.a.createElement("input",{type:"text",className:"modal-edit__input",name:"onStock",onChange:s,value:t,placeholder:"On Stock",required:!0}),w.a.createElement("label",{className:"modal-edit__label"},"On Stock:"),w.a.createElement("span",{className:"modal-edit__border"})),w.a.createElement("button",{className:"modal-edit__btn",type:"submit",disabled:!u&&n},"Edit course"))}},127:function(e,t,a){},219:function(e,t,a){"use strict";a.r(t);var A=a(0),M=a.n(A),L=a(8),n=a(3),q=a.n(n),n=a(18),r=a.n(n),n=a(5),B=a.n(n),n=a(4),U=a.n(n),n=a(1),T=a.n(n),V=a(10),H=a(7),J=a(9),z=a(116),W=a(126);function i(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function X(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach(function(e){r()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function l(){function i(e){if(!e)return t(e);t(e),setTimeout(function(){t("")},1500)}var e=Object(A.useContext)(V.a).checkSizeWindow,t=(h=Object(A.useContext)(H.a)).adjustValidationMsg,l=h.courses,c=h.setCourses,a=h.validationMsg,n=Object(A.useState)(""),s=(_=T()(n,2))[0],o=_[1],r=Object(A.useState)(""),d=(v=T()(r,2))[0],m=v[1],u=Object(A.useState)(!0),p=(N=T()(u,2))[0],g=N[1],h=Object(A.useState)(""),b=(n=T()(h,2))[0],f=n[1],_=Object(A.useState)(null),v=(r=T()(_,2))[0],O=r[1],u=Object(A.useState)(""),E=(N=T()(u,2))[0],j=N[1],h=Object(A.useState)(null),w=(n=T()(h,2))[0],_=n[1],r=Object(A.useState)(!1),N=((u=T()(r,2))[0],u[1]),h=Object(A.useState)(""),y=(n=T()(h,2))[0],I=n[1],r=Object(A.useState)(""),S=(u=T()(r,2))[0],C=u[1],h=Object(A.useState)(""),r=(n=T()(h,2))[0],P=n[1],u=Object(A.useState)(!1),n=(h=T()(u,2))[0],k=h[1],u=Object(A.useRef)(null),x=Object(A.useRef)(),D=Object(L.g)(),R=(D.location.pathname,D.location.state.product),F=["image/jpeg","image/png"],h=function(){var t=U()(q.a.mark(function e(t){var a,n,r;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),E!==R.imagePath&&-1!==R.imagePath.indexOf("firebasestorage"))try{z.a.refFromURL(R.imagePath).delete().then(function(e){return e}).catch(function(e){i("Something went wrong,please try again")})}catch(e){i("Something went wrong,please try again")}return a=(new Date).getTime(),r=(new Date).toISOString().slice(0,10),r={_id:R._id,title:y,imagePath:E||w,price:S,author:s,amount:parseInt(d),description:b,averageRate:R.averageRate,dateMilliseconds:a,dateString:r},e.next=8,Object(J.B)(r);case 8:r=e.sent,n=r.data,r=r.status,P(Object.keys(n)[0]),200===r?(i(n.success),r=B()(l),r=r.map(function(e){return e._id===n.course._id?X(X({},e),{},{title:n.course.title,imagePath:n.course.imagePath,price:n.course.price,author:n.course.author,amount:n.course.amount,description:n.course.description,averageRate:n.course.averageRate}):e}),c(r),I(""),j(""),C(""),o(""),m(""),f(""),x.current.value="",setTimeout(function(){return D.push("/admin/edit-course")},400)):i(n.alert);case 13:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}();return Object(A.useEffect)(function(){return D.listen(function(){"/admin/edit-course"!==D.location.pathname&&Boolean(w)&&Boolean(w)&&-1!==w.indexOf("firebasestorage")&&z.a.refFromURL(w).delete().then(function(e){return e}).catch(function(e){console.warn(e)})})},[w]),Object(A.useEffect)(function(){I(R.title),j(R.imagePath),C(R.price),o(R.author),m(R.amount),f(R.description)},[]),Object(A.useEffect)(function(){e&&D.push("/admin/edit-course")},[e]),M.a.createElement(W.a,{amount:d,author:s,checkIsImageLoaded:p,description:b,editFormRef:u,fileImg:v,handleAddImage:function(e){var t=(new Date).getTime().toString(),e=e.target.files[0];Object.defineProperty(e,"name",{value:e.name,writable:!0}),e.name="".concat(e.name,"-").concat(t),e&&F.includes(e.type)?(O(e),k(!0)):(O(null),k(!1),P("alert"),i("Please choose image valid format, like jpeg or png"))},handleChange:function(e){var t=e.target,e=t.name,t=t.value;"title"===e?I(t):"imagePath"===e?j(t):"price"===e?C(t):"author"===e?o(t):"onStock"===e?m(t):"description"===e&&f(t)},handleSubmit:h,handleValidateMsg:i,imagePath:E,inputFileRef:x,partClass:r,price:S,setCheckIsImageLoaded:g,setFileImg:O,showHideImgDiv:n,setIsAddAdvert:N,setImageUrl:_,setpartClass:P,title:y,validationMsg:a})}var c=a(124);t.default=function(){var e=Object(L.g)();return M.a.createElement(A.Fragment,null,M.a.createElement(c.a,{history:e}),M.a.createElement(l,null))}}}]);