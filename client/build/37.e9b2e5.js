(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{154:function(e,t,r){},155:function(e,t,r){},156:function(e,t,r){},157:function(e,t,r){},158:function(e,t,r){},159:function(e,t,r){},160:function(e,t,r){},212:function(e,t,r){"use strict";r.r(t);function c(e){var t=e.city,r=e.country,a=e.departmentState,n=e.email,c=e.name,s=e.numberStreet,i=e.phone,u=e.postCode,o=e.shipMethod,l=e.street,e=e.surname;return Y.a.createElement("div",{className:"order__order-shippingDetails order-shippingDetails",id:"shippingOrder"},Y.a.createElement("h3",{className:"order-shippingDetails__title"},"Shipping Details"),Y.a.createElement("h4",{className:"order-shippingDetails__title-delivery-address"},"Delivery address:"),Y.a.createElement("ul",{className:"order-shippingDetails__list"},Y.a.createElement("li",{className:"order-shippingDetails__item"},c," ",e),Y.a.createElement("li",{className:"order-shippingDetails__item"},l," ",s),Y.a.createElement("li",{className:"order-shippingDetails__item"},u," ",t),Y.a.createElement("li",{className:"order-shippingDetails__item"},a," ",r),Y.a.createElement("li",{className:"order-shippingDetails__item"},i),Y.a.createElement("li",{className:"order-shippingDetails__item"},n)),Y.a.createElement("h4",{className:"order-shippingDetails__title-delivery"},"Delivery method:"),Y.a.createElement("p",{className:"order-shippingDetails__delivery-method"},o))}function s(e){return e="paypal"===e.paymentMethod?Y.a.createElement("img",{className:"order-paymentDetails__img",src:"https://firebasestorage.googleapis.com/v0/b/products-courses.appspot.com/o/no-remove-paypal200.jpg?alt=media&token=8445e2fd-0067-45f2-96ee-141cd3f9d7c4",alt:"paypal"}):null,Y.a.createElement("div",{className:"order__order-paymentDetails order-paymentDetails",id:"paymentOrder"},Y.a.createElement("h3",{className:"order-paymentDetails__title"},"Payment method"),Y.a.createElement("div",{className:"order-paymentDetails__method-pay"},Y.a.createElement("p",{className:"order-paymentDetails__payment"},"Method: "),e))}function a(e){var t=e.imagePath,r=e.price,a=e.title,e=e.totalQtyProduct;return Y.a.createElement("div",{className:"orderCard-product"},Y.a.createElement("div",{className:"orderCard-product__images"},Y.a.createElement("img",{className:"orderCard-product__img",src:t,alt:a})),Y.a.createElement("div",{className:"orderCard-product__details"},Y.a.createElement("p",{className:"orderCard-product__name-product"},a),Y.a.createElement("p",{className:"orderCard-product__qty"},"Qty: ",e),Y.a.createElement("p",{className:"orderCard-product__price"},"Price: ",r)))}function i(e){return e=e.cart.map(function(e){return Y.a.createElement(a,u()({key:e._id},e))}),Y.a.createElement("div",{className:"order__order-itemsDetails order-itemsDetails",id:"itemsOrder"},Y.a.createElement("h3",{className:"order-itemsDetails__title"},"Order items"),e)}var n=r(24),u=r.n(n),n=r(114),o=r.n(n),U=r(0),Y=r.n(U),J=r(7),n=(r(154),r(155),r(156),r(157),r(158),r(159),r(3)),L=r.n(n),n=r(4),W=r.n(n),n=r(5),z=r.n(n),n=r(18),l=r.n(n),n=r(1),G=r.n(n),H=r(8),K=r(21),V=r(2),X=r(115),Z=r(16),$=r(9),k=(r(160),r(20)),ee=Object(U.forwardRef)(function(e,t){function r(){_(function(e){return e+12}),N.current=requestAnimationFrame(r)}var a=e.checkToClearTick,n=e.isOpen,c=e.isPay,s=e.handleClose,i=e.partTitle,u=e.setCheckToClearTick,o=e.title,l=e.subtitle,m=Object(U.useRef)(null),p=Object(U.useRef)(null),d=Object(U.useRef)(null),e=Object(U.useState)(0),e=G()(e,2),f=e[0],_=e[1],e=Object(U.useState)(53),e=G()(e,2),y=e[0],h=e[1],E=Object(U.useRef)(null),b=Object(U.useRef)(null),e=Object(U.useState)(0),e=G()(e,2),g=e[0],O=e[1],v=Object(U.useRef)(null),j=Object(U.useRef)(null),D=Object(U.useRef)(null),N=Object(U.useRef)(null);Object(U.useEffect)(function(){if(c&&m.current)return N.current=requestAnimationFrame(r),function(){return cancelAnimationFrame(N.current)}},[m.current]),Object(U.useLayoutEffect)(function(){if(c&&d.current)return v.current=window.setTimeout(function(){j.current=window.setInterval(function(){O(function(e){return e+1})})},900),function(){return clearTimeout(v.current)}},[d.current]),Object(U.useLayoutEffect)(function(){if(c&&p.current)return E.current=window.setTimeout(function(){b.current=window.setInterval(function(){h(function(e){return e-2})})},1e3),function(){return clearTimeout(E.current)}},[p.current]),Object(U.useEffect)(function(){if(c&&m.current){if(372<=f)return function(){return cancelAnimationFrame(N.current)};m.current.setAttribute("stroke-dasharray","".concat(f,",360"))}},[f]),Object(U.useEffect)(function(){c&&d.current&&(53<=g&&(clearInterval(j.current),clearTimeout(v.current)),d.current.setAttribute("stroke-dasharray","".concat(g,",53")))},[d.current,g]),Object(U.useEffect)(function(){c&&p.current&&(y<=0&&(clearInterval(b.current),clearTimeout(E.current)),p.current.setAttribute("stroke-dashoffset","-".concat(y)))},[p.current,y]);return Object(U.useEffect)(function(){a&&(D.current=setTimeout(function(){m.current.setAttribute("stroke-dasharray","0,360"),d.current.setAttribute("stroke-dasharray","0,53"),p.current.setAttribute("stroke-dashoffset","-53"),clearTimeout(D.current)},5100),u(!1))},[a]),Y.a.createElement(k.a,{isOpen:n,handleClose:s},c?Y.a.createElement("div",{className:"message-paypal-success",ref:t},Y.a.createElement("div",{className:"message-paypal-success__svg-icon"},Y.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 124 125",style:{enableBackground:"new 0 0 124 125"},xmlSpace:"preserve"},Y.a.createElement("circle",{className:"message-paypal-success__svg-circle",cx:"62.6",cy:"65.7",r:"57",fill:"white",strokeDasharray:"0,360",transform:"rotate(-90,62.6,65.7)",ref:m}),Y.a.createElement("path",{className:"message-paypal-success__svg-path-1",d:"M89.4,44.9C79.1,58.3,68.9,72.7,58.6,87.2",strokeDasharray:"53,53",strokeDashoffset:"-53",ref:p}),Y.a.createElement("line",{className:"message-paypal-success__svg-line",x1:"-338.9",y1:"-71.7",x2:"-338.9",y2:"-72.5"}),Y.a.createElement("path",{className:"message-paypal-success__svg-path-2",d:"M38.2,69.7c7.9,5.7,15.9,11.4,23.9,17.1",strokeDasharray:"0,53",ref:d}))),Y.a.createElement("h3",{className:"message-paypal-success__title"},o),Y.a.createElement("p",{className:"message-paypal-success__subTitle"},l)):Y.a.createElement("div",{className:"message-paypal",ref:t},Y.a.createElement("h3",{className:"message-paypal__title"},o),i?Y.a.createElement("h3",{className:"message-paypal__error-part-title"},i):null,Y.a.createElement("p",{className:"message-paypal__subTitle"},l)))});function m(t,e){var r,a=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)),a}function te(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach(function(e){l()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function d(e){var i=e.cart,r=e.city,a=e.country,n=e.departmentState,c=e.name,s=e.numberStreet,u=e.postCode,o=e.surname,l=e.street,m=e.shippingPrice,p=e.totalPriceOrder,d=e.totalPriceCart,f=e.customerDetails,_=(k=Object(U.useContext)(J.a)).courses,y=k.setCourses,h=k.setErrorServerMsg,E=k.setFlag,b=k.user,g=Object(U.useContext)(Z.a).clearCart,t=Object(U.useState)(!1),O=(T=G()(t,2))[0],v=T[1],j=Object(U.useState)(!1),D=(e=G()(j,2))[0],N=e[1],k=Object(U.useState)(!1),w=(t=G()(k,2))[0],C=t[1],T=Object(U.useState)(!1),e=(j=G()(T,2))[0],P=j[1],k=Object(U.useState)(!1),T=(t=G()(k,2))[0],S=t[1],j=Object(U.useState)(""),t=(k=G()(j,2))[0],x=k[1],R=Object(U.useRef)([]),A=Object(U.useRef)(!1),I=Object(U.useRef)(!1),F=Object(U.useRef)(null),M=Object(U.useRef)(),B=Object(U.useRef)(null),q=Object(H.g)(),Q=function(){var r=W()(L.a.mark(function e(t,r){var a,n,c,s;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],f.forEach(function(e){e=te({},e);a=[].concat(z()(a),[e])}),c=r.update_time.slice(0,10),s=r.update_time.slice(11,19),n=c+" "+s,c=a.map(function(e){return te(te({},e),{},{isPayed:!0,payerId:t.payerID,orderId:t.orderID,datePayed:n})}),delete(s=c.shift())._id,delete s.__v,e.next=11,Object($.x)(s);case 11:return c=e.sent,s=c.data,200!==c.status&&h(s),s=function(){var t=[];return _.forEach(function(e){e=te({},e);t=[].concat(z()(t),[e])}),t}(),(s=s.map(function(t){if(0<i.length){var e=i.find(function(e){return e._id===t._id});return Boolean(e)&&(t.amount=t.amount-e.totalQtyProduct),t}})).forEach(function(){var t=W()(L.a.mark(function e(t){return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.C)(t);case 2:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()),e.next=20,y(s);case 20:return e.next=22,E(function(e){return!e});case 22:case"end":return e.stop()}},e)}));return function(e,t){return r.apply(this,arguments)}}();return Object(U.useEffect)(function(){i.map(function(e){e={name:e.title,unit_amount:{value:e.price.toString(),currency_code:"EUR"},quantity:e.totalQtyProduct.toString()};R.current=[].concat(z()(R.current),[e])}),window.paypal.Buttons({style:{layout:"vertical",color:"gold",shape:"rect",label:"buynow",height:35},createOrder:function(e,t){return t.order.create({purchase_units:[{amount:{value:p.toString(),currency_code:"EUR",breakdown:{item_total:{value:d.toString(),currency_code:"EUR"},shipping:{value:m.toString(),currency_code:"EUR"}}},invoice_id:Object(X.a)(),items:R.current,shipping:{address:{address_line_1:"".concat(l," ").concat(s),admin_area_1:n,admin_area_2:r,country_code:a,postal_code:u},name:{full_name:"".concat(c," ").concat(o)}}}]})},onApprove:function(r,e){return e.order.capture().then(function(){var t=W()(L.a.mark(function e(t){return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(r,t);case 2:N(!0),P(!0),x(b.user),g();case 6:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())},onError:function(e){C(!0),P(!0)},onCancel:function(){P(!0),S(!0)}}).render(M.current)},[]),Object(U.useEffect)(function(){return I.current&&(A.current=setTimeout(function(){P(!1),N(!1),S(!1),v(!0),w?q.push("/shopping-cart"):D&&q.push("/")},5e3)),function(){return clearTimeout(A.current)}},[e]),Object(U.useEffect)(function(){return I.current=!0,function(){return I.current=!1}},[]),j=function(){P(!1)},Object(U.useEffect)(function(){return B.current=setTimeout(function(){F.current&&K.a.to(F.current,.8,{opacity:1,y:0,ease:V.b.easeOut})},100),function(){return clearTimeout(B.current)}},[T,w,e,D,F.current]),k=D?Y.a.createElement(ee,{checkToClearTick:O,isPay:D,isOpen:e,handleClose:j,setCheckToClearTick:v,subtitle:"You will be redirect to home page..",title:"Thank you for your purchase ".concat(t,", transaction successful."),ref:F}):null,t=w?Y.a.createElement(ee,{checkToClearTick:O,isPay:D,isOpen:e,handleClose:j,setCheckToClearTick:v,subtitle:"You will be redirect to home page. Please try one more time.",title:"Error during proccesing payment.",partTitle:"We are sorry for inconvenience.",ref:F}):null,j=T?Y.a.createElement(ee,{checkToClearTick:O,isPay:D,isOpen:e,handleClose:j,setCheckToClearTick:v,subtitle:" Your order is canceled successfully.",title:" Please check your order before paying..",ref:F}):null,Y.a.createElement(Y.a.Fragment,null,k,t,j,Y.a.createElement("div",{ref:M,id:"paypal-button-container"}))}function p(e){var t=e.cart,r=e.city,a=e.country,n=e.departmentState,c=e.name,s=e.numberStreet,i=e.postCode,u=e.shippingPrice,o=e.street,l=e.surname,m=e.totalPriceCart,p=e.totalPriceOrder,e=e.customerDetails,e=Y.a.createElement(d,{cart:t,city:r,country:a,departmentState:n,name:c,numberStreet:s,postCode:i,shippingPrice:u,street:o,surname:l,totalPriceCart:m,totalPriceOrder:p,customerDetails:e});return Y.a.createElement("div",{className:"order__order-summaryDetails order-summaryDetails",id:"summaryOrder"},Y.a.createElement("h3",{className:"order-summaryDetails__title"},"Order summary "),Y.a.createElement("div",{className:"order-summaryDetails__details"},Y.a.createElement("p",{className:"order-summaryDetails__subtotal"},"Items price:",Y.a.createElement("span",{className:"order-summaryDetails__subtotal-price"},parseInt(m)<1e3?m.toFixed(2):m,"€")),Y.a.createElement("p",{className:"order-summaryDetails__est-shipping"},"Estimated shipping:",Y.a.createElement("span",{className:"order-summaryDetails__ship-price"},u.toFixed(2),"€")),Y.a.createElement("p",{className:"order-summaryDetails__total"},"Total:"," ",Y.a.createElement("span",{className:"order-summaryDetails__total-price"},parseInt(p)<1e3?p.toFixed(2):p,"€")),Y.a.createElement("div",{className:"order-summaryDetails__payButtons"},e)))}t.default=function(e){o()(e);var t=Object(U.useContext)(J.a).customerDetails,r=t.map(function(e){return Y.a.createElement(c,u()({key:e._id},e))}),a=t.map(function(e){return Y.a.createElement(s,u()({key:e._id},e))}),n=t.map(function(e){return Y.a.createElement(i,u()({key:e._id},e))}),e=t.map(function(e){return Y.a.createElement(p,u()({key:e._id},e,{customerDetails:t}))});return Y.a.createElement("section",null,Y.a.createElement("div",{className:"order"},Y.a.createElement("h2",{className:"order__title"},"Order review"),Y.a.createElement("div",{className:"order__order-details"},r,a,n,e)))}}}]);