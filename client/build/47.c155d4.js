(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{188:function(e,a,t){},189:function(e,a,t){},222:function(e,a,t){"use strict";t.r(a);function F(e){var a=e.authorCourse,t=e.checkIsImageLoaded,s=e.description,n=e.fileImg,r=e.handleAddImage,c=e.handleChange,l=e.handleSubmit,d=e.handleValidateMsg,o=e.imagePath,i=e.inputFileRef,u=e.onStock,m=e.partClass,p=e.priceCourse,_=e.setCheckIsImageLoaded,g=e.setFileImg,b=e.setImageUrl,h=e.setIsAddAdvert,f=e.setpartClass,v=e.showHideImgDiv,E=e.titleCourse,e=e.validationMsg,f=Boolean(n)&&T.a.createElement(N.a,{handleValidateMsg:d,setCheckIsImageLoaded:_,uploadFile:n,setFileImg:g,setImageUrl:b,setIsAddAdvert:h,setpartClass:f}),e=e?T.a.createElement(C.a,{partClass:m,msg:e}):null;return T.a.createElement("form",{className:"add-course__form",onSubmit:l},e,f,T.a.createElement("div",{className:"add-course__wrap-input"},T.a.createElement("input",{type:"text",className:"add-course__input",name:"title",onChange:c,value:E,placeholder:"Title",required:!0}),T.a.createElement("label",{className:"add-course__label"},"Course title:"),T.a.createElement("span",{className:"add-course__border"})),T.a.createElement("div",{className:v?"add-course__wrap-input--inactive":"add-course__wrap-input"},T.a.createElement("input",{type:"text",className:"add-course__input",name:"imagePath",onChange:c,value:o,placeholder:"Image url address",required:!0!==v}),T.a.createElement("label",{className:"add-course__label"},"Image url address:"),T.a.createElement("span",{className:"add-course__border"})),T.a.createElement("div",{className:o?"add-course__wrap-input-file--inactive":"add-course__wrap-input-file"},T.a.createElement("input",{className:"add-course__add-input-file",name:"file",onChange:r,type:"file",required:!0!==Boolean(o),ref:i}),T.a.createElement("span",{className:"add-course__border"})),T.a.createElement("div",{className:"add-course__wrap-input"},T.a.createElement("textarea",{type:"text",className:"add-course__input add-course__input-textarea",name:"description",onChange:c,value:s,placeholder:"Description",required:!0}),T.a.createElement("label",{className:"add-course__label"},"Description:"),T.a.createElement("span",{className:"add-course__border"})),T.a.createElement("div",{className:"add-course__wrap-input"},T.a.createElement("input",{type:"number",className:"add-course__input",min:"0",name:"price",onChange:c,value:p,placeholder:"Price",required:!0}),T.a.createElement("label",{className:"add-course__label"},"Price:"),T.a.createElement("span",{className:"add-course__border"})),T.a.createElement("div",{className:"add-course__wrap-input"},T.a.createElement("input",{type:"text",className:"add-course__input",name:"author",onChange:c,value:a,placeholder:"Author",required:!0}),T.a.createElement("label",{className:"add-course__label"},"Author:"),T.a.createElement("span",{className:"add-course__border"})),T.a.createElement("div",{className:"add-course__wrap-input"},T.a.createElement("input",{type:"number",className:"add-course__input",min:"0",name:"onStock",onChange:c,value:u,placeholder:"On Stock",required:!0}),T.a.createElement("label",{className:"add-course__label"},"On stock:"),T.a.createElement("span",{className:"add-course__border"})),T.a.createElement("button",{className:"add-course__btn",type:"submit",disabled:!o&&t},"Add course"))}var s=t(3),D=t.n(s),s=t(5),M=t.n(s),s=t(4),q=t.n(s),s=t(1),L=t.n(s),R=t(0),T=t.n(R),s=t(8),B=(t(188),t(7)),U=t(116),V=t(9),N=(t(189),t(122)),C=t(25);a.default=Object(s.j)(function(e){function n(e){e&&(s(e),setTimeout(function(){s("")},1500))}var a=e.history,t=Object(R.useContext)(B.a),s=t.adjustValidationMsg,r=t.courses,c=t.setCourses,l=t.setIsloadFirstTimePage,d=t.validationMsg,o=Object(R.useState)(""),i=L()(o,2),u=i[0],m=i[1],p=Object(R.useState)(!0),_=L()(p,2),g=_[0],e=_[1],t=Object(R.useState)(""),o=L()(t,2),b=o[0],h=o[1],i=Object(R.useState)(null),p=L()(i,2),_=p[0],f=p[1],t=Object(R.useState)(!1),o=L()(t,2),i=(o[0],o[1]),p=Object(R.useState)(""),t=L()(p,2),v=t[0],E=t[1],o=Object(R.useState)(null),p=L()(o,2),N=p[0],C=p[1],t=Object(R.useState)(""),o=L()(t,2),I=o[0],w=o[1],p=Object(R.useState)(""),t=L()(p,2),o=t[0],S=t[1],p=Object(R.useState)(""),t=L()(p,2),j=t[0],O=t[1],p=Object(R.useState)(!1),t=L()(p,2),p=t[0],k=t[1],t=Object(R.useState)(""),t=L()(t,2),y=t[0],A=t[1],x=Object(R.useRef)(),P=["image/jpeg","image/png"],t=function(){var a=q()(D.a.mark(function e(a){var t,s;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),t=(new Date).getTime(),s=(new Date).toISOString().slice(0,10),t={titleCourse:y,imagePath:v||N,priceCourse:j,authorCourse:u,onStock:parseInt(I),description:b,averageRate:0,dateMilliseconds:t,dateString:s},e.next=6,Object(V.b)(t);case 6:s=e.sent,t=s.data,s=s.status,S(Object.keys(t)[0]),200===s?(n(t.success),c([].concat(M()(r),[t.course])),C(null),l(!0),A(""),E(""),O(""),m(""),w(""),h(""),x.current.value=""):n(t.alert);case 11:case"end":return e.stop()}},e)}));return function(e){return a.apply(this,arguments)}}();return Object(R.useEffect)(function(){return a.listen(function(){"/admin/add-course"!==a.location.pathname&&Boolean(N)&&Boolean(N)&&-1!==N.indexOf("firebasestorage")&&U.a.refFromURL(N).delete().then(function(e){return e}).catch(function(e){console.warn(e)})})},[N]),T.a.createElement("section",null,T.a.createElement("div",{className:"admin-content__add-course add-course"},T.a.createElement("h2",{className:"add-course__title"},"Fill in all fields to add new course"),T.a.createElement(F,{authorCourse:u,checkIsImageLoaded:g,description:b,fileImg:_,handleAddImage:function(e){var a=(new Date).getTime().toString(),e=e.target.files[0];Object.defineProperty(e,"name",{value:e.name,writable:!0}),e.name="".concat(e.name,"-").concat(a),e&&P.includes(e.type)?(f(e),k(!0)):(f(null),k(!1),S("alert"),n("Please choose image valid format, like jpeg or png"))},handleChange:function(e){var a=e.target,e=a.name,a=a.value;"title"===e?A(a):"imagePath"===e?E(a):"price"===e?O(a):"author"===e?m(a):"onStock"===e?w(a):"description"===e&&h(a)},handleSubmit:t,handleValidateMsg:n,imagePath:v,inputFileRef:x,onStock:I,partClass:o,priceCourse:j,setCheckIsImageLoaded:e,setFileImg:f,setImageUrl:C,setIsAddAdvert:i,setpartClass:S,titleCourse:y,showHideImgDiv:p,validationMsg:d})))})}}]);